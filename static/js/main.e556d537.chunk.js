(this["webpackJsonpbulls-and-cows"]=this["webpackJsonpbulls-and-cows"]||[]).push([[0],[,,,,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),_GuessInterface_css__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(22),_GuessInterface_css__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_GuessInterface_css__WEBPACK_IMPORTED_MODULE_1__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(0),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__),GuessInterface=function(e){var t=e.disabled,n=e.onTakeGuess,s=e.guessState,r=e.onSubmitGuessFunction,u=e.guessFunctionBody,o=e.setGuessFunctionBody,a=e.setGuess,i=e.difficultyLevel;return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("section",{className:"GuessInterface",children:"PROg(r)amer"===i?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r()},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("label",{htmlFor:"guessFunction",style:{display:"block"},children:["function (lastGuess:{guess: string, bulls: number, cows:number}, memory:any){",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("br",{}),"const result = {guess: '', memory: undefined"]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("textarea",{style:{display:"block"},onChange:function(e){return o(e.target.value)},value:u,disabled:t,placeholder:'//Brute Force Example\nif(lastGuess.guess === "") result.guess = "0000" \nresult.guess = String(Number(lastGuess.guess) + 1).padStart(4,"0")'}),"return result:{guess: string, memory: any}",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("br",{}),"}",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"submit",value:"Submit Function",disabled:t,style:{display:"block"}})]}):Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n()},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("label",{htmlFor:"guess",children:["Your Guess:",Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{autoComplete:"off",type:"string",name:"guess",value:s,onChange:function(e){return(containsOnlyDigits(e.target.value)||""===e.target.value)&&e.target.value.length<=4&&a(e.target.value)},disabled:t,placeholder:"4 Digit Number"})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("input",{type:"submit",value:"Take Guess",disabled:t||!isValidGuess(s,i)})]})})};function isValidGuess(e,t){return 4===e.length&&(!!containsOnlyDigits(e)&&!("Easy"===t&&!guessHasUniqueDigits(e)))}function guessHasUniqueDigits(e){for(var t=0;t<e.length;t++)if(e.lastIndexOf(e[t])!==t)return!1;return!0}function containsOnlyDigits(e){var t;return(null===(t=e.match(/[0-9]/g))||void 0===t?void 0:t.join(""))===e}function createGuessFunction(guessFunctionBody){return function(lastGuess,memory){var result={guess:"",memory:void 0};return eval(guessFunctionBody),result}}__webpack_exports__.a=GuessInterface},function(module,__webpack_exports__,__webpack_require__){"use strict";var worker=function worker(){function createGuessFunction(guessFunctionBody){return function(lastGuess,memory){var result={guess:"",memory:void 0};return eval(guessFunctionBody),result}}function runGuessingFunction(e,t){try{for(var n=1,s={guess:"",bulls:0,cows:0},r=null;n<=1e4;){var u=e(s,r),o=u.guess;if(r=u.memory,s.guess=o,s.bulls=getNumberOfBulls(t,o),s.cows=getNumberOfCows(t,o),s.guess===t)break;n++}return{type:"success",foundNumber:s.guess===t,numGuesses:n}}catch(a){return{type:"error",error:a}}}function getNumberOfBulls(e,t){for(var n=0,s=0;s<t.length;s++){t[s]===e[s]&&n++}return n}function getNumberOfCows(e,t){for(var n=0,s=0;s<t.length;s++){var r=t[s];e.includes(r)&&r!==e[s]&&n++}return n}function generateNumber(){for(var e=[];e.length<4;){var t=Math.floor(10*Math.random());e.push(t)}return e.join("")}self.onmessage=function(e){var t=e.data;switch(t.type){case"ping":self.postMessage({type:"pong"});break;case"runFunction":for(var n=createGuessFunction(t.payload.functionBody),s=0,r={type:"error",error:new Error("should never happen")},u=0;u<1e3&&"error"!==(r=runGuessingFunction(n,generateNumber())).type&&("success"!==r.type||!1!==r.foundNumber);u++)s+=r.numGuesses;s/=1e3,"success"===r.type&&self.postMessage({type:"result",correctGuess:r.foundNumber,numGuesses:r.foundNumber?Math.floor(s):1e4}),"error"===r.type&&self.postMessage({type:"error",error:r.error.toString()})}}};__webpack_exports__.a=worker},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var s=n(2),r=n.n(s),u=n(7),o=n.n(u),a=(n(16),n(8)),i=n(11),c=n(1),l=n(5),d=(n(17),n(18),n(0)),_=function(e){var t=e.history,n=e.playerName,s=e.difficultyLevel;return Object(d.jsxs)("section",{className:"History",children:[Object(d.jsx)("h2",{children:"Previous Games".concat(n?" of ".concat(n):""," on Difficulty ").concat(s,":")}),Object(d.jsx)("ol",{children:t.map((function(e,t){return e.playerName===n&&e.difficultyLevel===s&&"PROg(r)amer"!==s?Object(d.jsx)("li",{children:"".concat(e.playerName," required ").concat(e.numGuesses," guesses to guess the number ").concat(e.number)},t):e.playerName===n&&e.difficultyLevel===s&&"PROg(r)amer"===s?Object(d.jsx)("li",{children:"".concat(e.playerName," wrote a function that required ").concat(e.numGuesses," guesses on average to guess a random number.")},t):void 0}))})]})},f=(n(20),function(){return Object(d.jsxs)("section",{className:"Description",children:[Object(d.jsx)("h1",{children:"Bulls and Cows"}),Object(d.jsx)("p",{children:"The computer will come up with a random 4 digit number. Your Goal is to guess this number."}),Object(d.jsx)("p",{children:'After each guess you will get a hint on how "close" your guess is to the number. If there are any matching digits and they are in their right positions, they are counted as "bulls". If in different positions, they are counted as "cows".'}),Object(d.jsxs)("section",{children:["Difficulty Levels:",Object(d.jsxs)("dl",{children:[Object(d.jsx)("dt",{children:"Easy"}),Object(d.jsx)("dd",{children:"All Digits are unique."}),Object(d.jsx)("dt",{children:"Medium"}),Object(d.jsx)("dd",{children:"Digits may not be unique."}),Object(d.jsx)("dt",{children:"PROg(r)amer"}),Object(d.jsxs)("dd",{children:["Instead of guessing, you write a function which guesses for you. The function is always called with the lastGuess object and a memory argument. In the first invocation of the function lastGuess ="," ","{guess: '', bulls: 0, cows: 0}"," and memory = null. The function should return a results object like ","{guess: string, memory: any}"," ","where guess should be a 4 digit String containing your guess and memory can be anything you want to remember for further invocations. On further invocations the function will be called with it's last Guess, the number of bulls and cows this guess had and the last memory returned by the function."]})]})]})]})}),m=(n(21),function(e){var t=e.disabled,n=e.optionState,s=n.playerName,r=n.difficultyLevel,u=e.setOptions,o=e.previousPlayers;return Object(d.jsxs)("section",{className:"Options",children:[Object(d.jsxs)("label",{htmlFor:"playerName",children:["Player Name:",Object(d.jsx)("input",{list:"playerNames",type:"text",name:"playerName",value:s,onChange:function(e){return u({playerName:e.target.value})},disabled:t}),Object(d.jsx)("datalist",{id:"playerNames",children:o.map((function(e,t){return Object(d.jsx)("option",{value:e},t)}))})]}),Object(d.jsxs)("label",{htmlFor:"difficulty",children:["Difficulty:",Object(d.jsxs)("select",{name:"difficulty",value:r,id:"difficultyLevels",onChange:function(e){return u({difficultyLevel:e.target.value})},disabled:t,children:[Object(d.jsx)("option",{value:"Easy",children:"Easy"}),Object(d.jsx)("option",{value:"Medium",children:"Medium"}),Object(d.jsx)("option",{value:"PROg(r)amer",children:"PROg(r)amer"})]})]})]})}),b=n(9),y=n(10),g=(n(23),function(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(s.useEffect)((function(){var e=setInterval((function(){var e=Array((n.length+1)%4).fill(".").join("");r(e)}),500);return function(){clearInterval(e)}})),Object(d.jsx)("div",{className:"Loader",children:"Evaluating your Function".concat(n)})}),p={options:{playerName:"Stranger",difficultyLevel:"Easy"},round:{evaluatingFunction:!1,number:x("Easy"),correctGuess:!1,guess:"",numGuesses:0,message:"Take a guess!",bulls:0,cows:0,guessFunctionBody:""},history:[]};function h(e){var t,n=[],s=Object(a.a)(e);try{for(s.s();!(t=s.n()).done;){var r=t.value;n.includes(r.playerName)||n.push(r.playerName)}}catch(u){s.e(u)}finally{s.f()}return n}function j(e,t){var n=Object(c.a)({},e);switch(t.type){case"options":return n.options=Object(c.a)(Object(c.a)({},e.options),t.options),e.options.difficultyLevel!==n.options.difficultyLevel&&(n.round.number=x(n.options.difficultyLevel)),n;case"round":return Object(c.a)(Object(c.a)({},e),{},{round:Object(c.a)(Object(c.a)({},e.round),t.round)});case"history":return Object(c.a)(Object(c.a)({},e),{},{history:t.history});default:return e}}function O(e,t){for(var n=0,s=0;s<t.length;s++){t[s]===e[s]&&n++}return n}function v(e,t){for(var n=0,s=0;s<t.length;s++){var r=t[s];e.includes(r)&&r!==e[s]&&n++}return n}function E(e){var t=Math.floor(Math.random()*e.length);return"If i were you, i would put a ".concat(e[t]," on the ").concat(w(t+1)," position.")}function x(e){for(var t=[];t.length<4;){var n=Math.floor(10*Math.random());t.includes(n)||"Easy"!==e||t.push(n),"Easy"!==e&&t.push(n)}return t.join("")}function w(e){switch(e){case 1:return"1st";case 2:return"2nd";case 3:return"3rd";default:return e+"th"}}var G=function(){var e=Object(s.useReducer)(j,p),t=Object(l.a)(e,2),n=t[0],r=t[1];return Object(s.useLayoutEffect)((function(){var e=function(){var e=localStorage.getItem("history");return e?JSON.parse(e):[]}();r({type:"history",history:e})}),[]),Object(d.jsxs)("div",{className:"App",children:[n.round.evaluatingFunction?Object(d.jsx)(g,{}):null,Object(d.jsx)(f,{}),Object(d.jsx)(m,{disabled:n.round.numGuesses>0||n.round.evaluatingFunction,previousPlayers:h(n.history),optionState:n.options,setOptions:function(e){r({type:"options",options:e})}}),Object(d.jsx)(b.a,{difficultyLevel:n.options.difficultyLevel,guessState:n.round.guess,setGuess:function(e){return r({type:"round",round:{guess:e}})},disabled:n.round.correctGuess||n.round.evaluatingFunction,onSubmitGuessFunction:function(){return function(e,t,n){e({type:"round",round:{evaluatingFunction:!0}});var s=y.a.toString(),r=new Blob(["("+s+")()"]),u=new Worker(URL.createObjectURL(r)),o=!1;u.onmessage=function(n){e({type:"round",round:{evaluatingFunction:!1}}),o=!0;var s=n.data;switch(s.type){case"result":s.correctGuess?e({type:"round",round:{numGuesses:s.numGuesses,message:"Your Function needed ".concat(s.numGuesses," guesses on average to find the number"),correctGuess:!0,guess:t}}):e({type:"round",round:{message:"Your Function has not found the correct Number after ".concat(s.numGuesses," guesses. Try changing it.")}});break;case"error":e({type:"round",round:{message:s.error}})}u.terminate()},u.postMessage({type:"runFunction",payload:{functionBody:n,number:t}}),setTimeout((function(){o||(e({type:"round",round:{evaluatingFunction:!1}}),u.terminate(),e({type:"round",round:{message:"It seems like your function is too slow or contains an infinite loop, try changing it. It took more than 5s to complete."}}))}),5e3)}(r,n.round.number,n.round.guessFunctionBody)},guessFunctionBody:n.round.guessFunctionBody,setGuessFunctionBody:function(e){return r({type:"round",round:{guessFunctionBody:e}})},onTakeGuess:function(){var e=function(e){var t=e.round,n=t.number,s=t.guess,r=t.numGuesses,u=O(n,s),o=v(n,s);return{numGuesses:++r,correctGuess:n===s,bulls:u,cows:o}}(n);console.log(Object(c.a)(Object(c.a)({},n),e));var t=function(e){var t=e.round,n=t.number,s=t.numGuesses,r=t.bulls,u=t.cows,o=e.options.playerName,a=["Woops, no cows and no bulls? Better luck next time!","At least you tried?!","Are you sure you understood the Game?","".concat(E(n))];return s>0?4===r?"Congratulation ".concat(o,"! You found the correct Number. Ready for a new Round?"):r+u>0?"Almost, you found ".concat(r," bulls and ").concat(u," cows. This is your ").concat(w(s)," guess."):a[Math.floor(Math.random()*a.length)]+" This is your ".concat(w(s)," guess."):"Take a guess!"}(Object(c.a)(Object(c.a)({},n),{},{round:Object(c.a)(Object(c.a)({},n.round),e)}));console.log(t),r({type:"round",round:Object(c.a)(Object(c.a)({},e),{},{message:t})})}}),Object(d.jsx)("p",{children:n.round.message}),Object(d.jsx)("input",{type:"button",value:"New Round",disabled:!n.round.correctGuess||n.round.evaluatingFunction,onClick:function(){r({type:"resetGuessFunction"}),r({type:"round",round:Object(c.a)(Object(c.a)({},p.round),{},{number:x(n.options.difficultyLevel)})});var e=[].concat(Object(i.a)(n.history),[{playerName:n.options.playerName,numGuesses:n.round.numGuesses,number:n.round.number,difficultyLevel:n.options.difficultyLevel}]);r({type:"history",history:e}),localStorage.setItem("history",JSON.stringify(e))}}),Object(d.jsx)(_,{history:n.history,playerName:n.options.playerName,difficultyLevel:n.options.difficultyLevel})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,25)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,u=t.getLCP,o=t.getTTFB;n(e),s(e),r(e),u(e),o(e)}))};o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(G,{})}),document.getElementById("root")),M()}],[[24,1,2]]]);
//# sourceMappingURL=main.e556d537.chunk.js.map